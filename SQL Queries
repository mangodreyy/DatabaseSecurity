# ** Database Security Group 17 **

```sql
-- Creation of Assignment's Database -- 
CREATE DATABASE DBS_G17;
GO

USE DBS_G17;
GO

-- TDE [Database Encryption] -- 
use master;
create master key encryption by password = 'DBS_G17_Submission';

create certificate DBS_G17 with subject = 'DBS_G17_Assignment';

use DBS_G17;
create database encryption key with algorithm = AES_256
encryption by server certificate DBS_G17;

-- set the encryption for lab1 on, so that if ppl try to steal the database they cant without the cert
alter database DBS_G17 set encryption on;

-- TABLES -- 
-- Department Table
CREATE TABLE Department (
	DepartmentID VARCHAR(10) NOT NULL PRIMARY KEY,
	DepartmentName VARCHAR(100) UNIQUE NOT NULL
);
GO

INSERT INTO Department VALUES
('DBA', 'Database Administration'),
('SDEV', 'Software Development'),
('ACC', 'Accounting'),
('HR', 'Human Resources'),
('MKT', 'Marketing Development'),
('AGENT','Agents');
GO

-- Employee Table
CREATE TABLE Employee (
	EmployeeID INT IDENTITY(1,1) NOT NULL PRIMARY KEY, 
	DepartmentID VARCHAR(10) FOREIGN KEY REFERENCES Department(DepartmentID),
	Status NVARCHAR(20) DEFAULT 'ACTIVE',
	CreatedAt DATETIME DEFAULT GETDATE()
);
GO

-- Database Administrations Table [DBA]
CREATE TABLE DatabaseAdministration(
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Software Developers Team Table [SDEV]
CREATE TABLE SoftwareDevelopers(
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Accounting Team Table [ACC]
CREATE TABLE Accounting(
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Human Resources Team Table [HR]
CREATE TABLE HumanResources(
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Marketing Development Table [MKT]
CREATE TABLE MarketingDevelopment(
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Agents Table [AGENT]
CREATE TABLE Agents (
	EmployeeID INT FOREIGN KEY REFERENCES Employee(EmployeeID),
	RoleInDepartment VARCHAR(50) CHECK (RoleInDepartment IN ('Manager', 'Team Member')),
	FullName VARCHAR(100) NOT NULL,
	Email NVARCHAR(100),
	Phone NVARCHAR(20) NOT NULL,
	Address NVARCHAR (255)
);
GO

-- Products Table
CREATE TABLE Products (
	
);
GO

-- Sales Table
CREATE TABLE Sales (
	
);
GO

-- Commission Table
CREATE TABLE Commission (
	
);
GO

-- Invoice Table


-- Customer Table
CREATE TABLE Customers (
	CustID VARCHAR(5) NOT NULL PRIMARY KEY,
	CustName varchar(100) NOT NULL,
	Phone varchar(20),
	Email varchar(200),
);
GO

```
